<!-- ページトップへ戻るボタンの作り方【JavaScript】 -->
<!-- 
  Reference study site
  URL: https://sinpe-pgm.com/pagetop-button-js/
 -->
<!-- 
  ・実装 条件
    JavaScriptで実装していること
    スムーススクロールに対応していること
    デフォルトは非表示で、スクロール後に表示

  ・問題点を回避（IEとSafariに対応させる）
    さきほど使用した「top」と「behavior」ですがSafariではsmoothが効かず、IEは非対応です。
  
    smoothscroll.jsを読み込んで正常に動くようにします。
    これで、どのブラウザでもボタンをクリックするとスルスルっとページトップへ移動するようになりました。

    <a href="https://unpkg.com/smoothscroll-polyfill@0.4.4/dist/smoothscroll.min.js" target="_blank" rel="noreferrer noopener">smoothscroll.js</a>
 -->

<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    body {
      background: #DFEFF2;
    }

    .space {
      height: 5000px;
    }

    .pagetop {
      cursor: pointer;
      position: fixed;
      right: 30px;
      bottom: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      transition: .3s;
      color: #00A6C4;
      background: #fff;

      /*   デフォルトは非表示 */
      opacity: 0;
    }

    .pagetop:hover {
      box-shadow: 0 0 10px #00A6C4;
    }
  </style>
</head>

<body>
  <div class="space">スクロールして下さい</div>
  <div class="pagetop">Top</div>

  <script>
    'use strict';
    // IE、Safari対応
    // smoothscroll.js読み込み
    // https://github.com/iamdustan/smoothscroll

    // セレクタ名（.pagetop）に一致する要素を取得
    const pagetop_btn = document.querySelector(".pagetop");

    // .pagetopをクリックしたら
    pagetop_btn.addEventListener("click", scroll_top);

    // ページ上部へスムーズに移動
    function scroll_top() {
      window.scroll({ top: 0, behavior: "smooth" });
    }

    // スクロールされたら表示
    window.addEventListener("scroll", scroll_event);
    function scroll_event() {
      if (window.pageYOffset > 100) {
        pagetop_btn.style.opacity = "1";
      } else if (window.pageYOffset < 100) {
        pagetop_btn.style.opacity = "0";
      }
    }
  </script>
</body>

</html>